import{a as l,e as a,d as x,b as t,t as i,g as I,F as f,w,h as C,i as g,j as k,_ as V,r as y,o as O,c as T,k as $,v as j}from"./index-BTNOkBFJ.js";const A=["onClick"],M={class:"d-flex w-100 justify-content-between"},N={class:"mb-1"},S={class:"mb-1"},B={__name:"ProductList",props:{data:{type:Array,require:!0}},emits:["add-item"],setup(m,{emit:c}){const s=m,o=c,n=_=>{o("add-item",_)};return(_,u)=>(a(!0),l(f,null,x(s.data,p=>(a(),l("div",{class:"list-group",key:p.id},[t("a",{href:"#",class:"list-group-item list-group-item-action",onClick:I(d=>n(p.id),["prevent"])},[t("div",M,[t("h5",N,i(p.name),1),t("small",null,"$"+i(p.price),1)]),t("p",S,i(p.description),1)],8,A)]))),128))}},D=["onClick"],E=["onUpdate:modelValue"],L={__name:"CartList",props:{cart:{type:Array,require:!0}},emits:["delete-cart-item"],setup(m,{emit:c}){const s=m,o=c,n=u=>{o("delete-cart-item",u)},_=u=>u.price*u.quantity;return(u,p)=>(a(!0),l(f,null,x(s.cart,d=>(a(),l("tr",{key:d.id},[t("td",null,[t("button",{type:"button",class:"btn btn-sm",onClick:b=>n(d.id)},"x",8,D)]),t("td",null,i(d.name),1),t("td",null,[t("small",null,i(d.description),1)]),t("td",null,[w(t("select",{class:"form-select","onUpdate:modelValue":b=>d.quantity=b},p[0]||(p[0]=[g('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option>',10)]),8,E),[[C,d.quantity]])]),t("td",null,i(d.price),1),t("td",null,i(_(d)),1)]))),128))}},U={class:"card-body"},F={class:"card-title"},Q={class:"table"},K={class:"text-end"},P={class:"text-end"},W={__name:"OrderItem",props:{order:{type:Object,require:!0}},setup(m){const c=m;return(s,o)=>(a(),l("div",U,[t("div",F,[o[3]||(o[3]=t("h5",null,"訂單",-1)),t("table",Q,[o[0]||(o[0]=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"品項"),t("th",{scope:"col"},"數量"),t("th",{scope:"col"},"小計")])],-1)),t("tbody",null,[(a(!0),l(f,null,x(c.order.list,n=>(a(),l("tr",{key:n.id},[t("td",null,i(n.name),1),t("td",null,i(n.quantity),1),t("td",null,i(n.subtotal),1)]))),128))])]),t("div",K,[o[1]||(o[1]=k(" 備註: ",-1)),t("span",null,i(c.order.note),1)]),t("div",P,[t("h5",null,[o[2]||(o[2]=k(" 總計: ",-1)),t("span",null,"$"+i(c.order.total),1)])])])]))}},z={id:"root"},G={class:"container mt-5"},H={class:"row"},J={class:"col-md-4"},R={class:"col-md-8"},X={class:"table"},Y={key:0,class:"text-center alert alert-primary"},Z={key:1},tt={class:"text-end mb-3"},et={class:"row justify-content-center"},ot={class:"col-8"},st={key:0,class:"text-center alert alert-secondary"},nt={key:1,class:"card"},lt={class:"toast-container position-fixed top-0 end-0 p-3"},at={class:"toast-body"},it={__name:"OrderView",setup(m){const c=y([]),s=y([]),o=y(""),n=y({list:[],total:0,note:""}),_=y([]),u=r=>{_.value.push({message:r}),setTimeout(()=>{_.value.shift()},3e3)};O(()=>{c.value.push({id:1,name:"珍珠奶茶",description:"香濃奶茶搭配QQ珍珠",price:50},{id:2,name:"冬瓜檸檬",description:"清新冬瓜配上新鮮檸檬",price:45},{id:3,name:"翡翠檸檬",description:"綠茶與檸檬的完美結合",price:55},{id:4,name:"四季春茶",description:"香醇四季春茶，回甘無比",price:45},{id:5,name:"阿薩姆奶茶",description:"阿薩姆紅茶搭配香醇鮮奶",price:50},{id:6,name:"檸檬冰茶",description:"檸檬與冰茶的清新組合",price:45},{id:7,name:"芒果綠茶",description:"芒果與綠茶的獨特風味",price:55},{id:8,name:"抹茶拿鐵",description:"抹茶與鮮奶的絕配",price:60})});const p=r=>{const e=c.value.find(h=>h.id===r),v=s.value.findIndex(h=>h.id===r);if(v!==-1){if(s.value[v].quantity<10){s.value[v].quantity+=1;return}u(`${e.name} 選購數量已達上限`);return}s.value.push({id:e.id,name:e.name,description:e.description,price:e.price,quantity:1}),u(`${e.name} 已加入購物車`)},d=T(()=>s.value.reduce((r,e)=>r+e.price*e.quantity,0)),b=r=>{const e=s.value.findIndex(v=>v.id===r);s.value.splice(e,1)},q=()=>{n.value.list=s.value.map(r=>({...r,subtotal:r.price*r.quantity})),n.value.total=d.value,n.value.note=o.value,s.value=[],o.value="",u("訂單已送出")};return(r,e)=>(a(),l("div",z,[t("div",G,[e[3]||(e[3]=t("h2",{class:"text-center pb-4"},"WEEK 3 : 餐點管理工具",-1)),t("div",H,[t("div",J,[$(B,{data:c.value,onAddItem:p},null,8,["data"])]),t("div",R,[t("table",X,[e[1]||(e[1]=t("thead",null,[t("tr",null,[t("th",{scope:"col",width:"50"},"操作"),t("th",{scope:"col"},"品項"),t("th",{scope:"col"},"描述"),t("th",{scope:"col",width:"90"},"數量"),t("th",{scope:"col"},"單價"),t("th",{scope:"col"},"小計")])],-1)),t("tbody",null,[$(L,{cart:s.value,onDeleteCartItem:b},null,8,["cart"])])]),s.value.length===0?(a(),l("div",Y,"請選購商品")):(a(),l("div",Z,[t("div",tt,[t("h5",null,[e[2]||(e[2]=k(" 總計: ",-1)),t("span",null,"$"+i(d.value),1)])]),w(t("textarea",{class:"form-control mb-3",rows:"3",placeholder:"備註","onUpdate:modelValue":e[0]||(e[0]=v=>o.value=v)},null,512),[[j,o.value]]),t("div",{class:"text-end"},[t("button",{class:"btn btn-primary",onClick:q},"送出")])]))])]),e[4]||(e[4]=t("hr",null,null,-1)),t("div",et,[t("div",ot,[n.value.list.length===0?(a(),l("div",st," 尚未建立訂單 ")):(a(),l("div",nt,[$(W,{order:n.value},null,8,["order"])]))])])]),t("div",lt,[(a(!0),l(f,null,x(_.value,(v,h)=>(a(),l("div",{key:h,class:"toast show",role:"alert","aria-live":"assertive","aria-atomic":"true"},[t("div",at,i(v.message),1)]))),128))])]))}},dt=V(it,[["__scopeId","data-v-17a5b58c"]]);export{dt as default};
